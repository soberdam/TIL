# 목차

<!-- TOC tocDepth:1..3 chapterDepth:1..6 -->

- [목차](#목차)
- [Git 이란?](#git-이란)
- [commit](#commit)
        - [**커밋 주의사항**](#커밋-주의사항)
        - [**커밋 메시지 작성법**](#커밋-메시지-작성법)
- [add](#add)
    - [Git이 추적하는 파일은 세가지로 구분](#git이-추적하는-파일은-세가지로-구분)
    - [Staging을 하는 이유](#staging을-하는-이유)
- [push (github에 업로드)](#push-github에-업로드)
- [커밋 되돌리기](#커밋-되돌리기)
    - [reset으로 커밋 되돌리기](#reset으로-커밋-되돌리기)
    - [revert를 사용해 커밋 되돌리기](#revert를-사용해-커밋-되돌리기)
    - [Reset vs Revert](#reset-vs-revert)
    - [브랜치 만들어서 커밋 되돌리기](#브랜치-만들어서-커밋-되돌리기)
- [branch](#branch)
    - [merge](#merge)
    - [rebase(재배치)](#rebase재배치)
    - [merge vs rebase](#merge-vs-rebase)
        - [사용하지 않는 브랜치 삭제하기](#사용하지-않는-브랜치-삭제하기)
    - [커밋 덮어쓰기](#커밋-덮어쓰기)
- [충돌](#충돌)
    - [충돌의 발생 원인](#충돌의-발생-원인)
    - [merge 충돌 해결 방법](#merge-충돌-해결-방법)
    - [rebase 충돌 해결 방법](#rebase-충돌-해결-방법)
- [원격 저장소와 연동하기](#원격-저장소와-연동하기)
    - [git pull](#git-pull)
    - [pull 할 것이 있을 때 push를 하려면?](#pull-할-것이-있을-때-push를-하려면)
    - [로컬의 내역 강제 push하기](#로컬의-내역-강제-push하기)
    - [**로컬에서 브랜치 만들어 원격에 push 하기**](#로컬에서-브랜치-만들어-원격에-push-하기)
    - [**원격의 브랜치를 로컬에 받아오기**](#원격의-브랜치를-로컬에-받아오기)
    - [**원격의 브랜치 삭제**](#원격의-브랜치-삭제)
- [스태시](#스태시)
    - [브랜치 변경하기](#브랜치-변경하기)
    - [**스태시 사용하기**](#스태시-사용하기)
- [기타 주의사항](#기타-주의사항)
- [**Git의 관리에서 특정 파일/폴더를 배제해야 할 경우**](#git의-관리에서-특정-파일폴더를-배제해야-할-경우)
    - [**a. 포함할 필요가 없을 때**](#a.-포함할-필요가-없을-때)
    - [**b. 포함하지 말아야 할 때**](#b.-포함하지-말아야-할-때)

<!-- /TOC -->

# Git 이란?

형상관리 시스템(Version Control System)의 하나로, 주로 개발자들이 프로그램과 관련된 파일을 저장하는데 사용된다. 게임에서의 세이브와 같은 역할을 하는데, 언제든지 저장 시점으로 돌아갈 수 있다.

#### 깃헙 토큰

깃헙에 다른 터미널이나 application에서 접속할 때 비밀번호 대신 사용한다.


# commit

게임의 세이브에 해당되는 행동을 git에서 commit이라 하며, 언제든지 commit한 시점으로 돌아갈 수 있다. 커밋을 하려면 **저장할 파일들을 묶어서** 커밋 명령을 수행한다.

### **커밋 주의사항**

1. 반드시 한 번에 하나의 논리적 작업만을 커밋한다.
2. 커밋 메시지를 꼼꼼히 적는다.


### **커밋 메시지 작성법**

1. 첫 줄에 간단하지만 명확하게 내용을 쓴다.
2. 한 줄 비우고
3. 자세한 내용을 적는다.


# add

커밋을 하기 전에 저장할 파일들을 묶어야 하는데, 이 작업을 **스테이지에 파일을 올린다**. 혹은 줄여서 **add**라고 한다.

## Git이 추적하는 파일은 세가지로 구분

- Unmodified : 이전 버전과 비교하여 **수정된 부분이 없는 상태**
- Modified : 이전 버전과 비교하여 **수정된 부분이 있는 상태**
- Staged : 커밋을 위해 준비된 상태

## Staging을 하는 이유

- 여러 작업 중, 일부분만 커밋해야 할 때
    - ex) 작업을 하고 있는데, 특정 기능까지 업로드 해달라고 요청
- 커밋 전 상태를 수정 또는 체크할 때
    - 메세지에 오타를 내거나, 파일을 잘못 커밋하는 경우는 충분히 발생 가능

# push (github에 업로드)

커밋을 하면 **add한 작업내용의 정보가 로컬에 저장**된다. 이걸 github이라는 원격저장소에 원격저장을 하면 파일을 공유할 수 있고 언제든지 백업할 수 있다. github에 업로드 하는걸 push라고 한다.


# 커밋 되돌리기

## reset으로 커밋 되돌리기

- git reset --hard에 해당하는 명령으로 커밋을 되돌리기
    - reset 이후 push는 force 옵션을 선택해야 함
- 이전 커밋은 날아감
- 이후 커밋하면 원격저장소와 헤드 브랜치에 담긴 내용이 달라지므로
- 원격 저장소에 push --force 가 필요하거나
- 로컬에 있는 내용으로 merge 후 commit
- 커밋이 없어질 가능성이 높으므로 권장되지 않음

## revert를 사용해 커밋 되돌리기

- 대상 커밋을 Head커밋의 자식으로 새로 생성한다.
- revert 대상 커밋은 사라지지 않는다.
- revert 대상 커밋의 내용을 되돌린 새로운 커밋이 생겨난다.
- 충돌 가능성이 높고 어렵다.
- 여러개의 커밋을 revert하려면 최신부터 순서대로 반복한다 (충돌 방지를 위해)
- 특정 커밋만 revert할 수도 있지만 충돌이 발생할 수 있다.

## Reset vs Revert

- Reset은 완전히 되돌려서, 이전 커밋 내역까지 초기화한다.
- Revert는 특정 커밋을 되돌린 새로운 커밋을 생성한다.
- 이미 공유된 commit이 있을 때에는 reset보다 revert를 사용한다.(reset되기 전 커밋으로 작업한 사람들이 있을 수 있으므로)

## 브랜치 만들어서 커밋 되돌리기

- 되돌릴 커밋 대상으로 브랜치 생성
- 체크아웃
- 변경 사항 수정 후 커밋
- master에 merge
- 트리가 지저분해진다는 단점이 있다.


# branch

기능 변경을 하고싶을 때 생성 및 사용한다. 기존의 마스터 브랜치는 유지하며 새로운 브랜치에서 기능을 작성할 수 있다. 현재 작업중인 브랜치를 헤드 브랜치(Head brench)라고 한다.

## merge

한 브랜치의 내용을 다른 브랜치에 반영한다.

![Untitled (2)](https://user-images.githubusercontent.com/106129404/224923539-4e8628e1-c29b-4565-b20a-9f065a4ce5a3.png)

- 상황 1 : **헤드 브랜치에 변경사항이 없는 경우**
    1. 합치려는 브랜치가 헤드 브랜치에서부터 시작되었다.
    2. 그 사이 헤드브랜치는 변경사항이 없었다.
        
        → 단순히 브랜치의 참조만 갱신되는 상황, fast-forward
        
    
 ![Untitled (3)](https://user-images.githubusercontent.com/106129404/224923602-8b87ddc8-8ed6-4fad-b6f1-ae43fc2ec804.png)

    
- 상황 2 : **가지만 생겨난 경우**
    1. 과거의 커밋으로부터 브랜치를 생성해서 작업을 한 경우
    2. 새로운 브랜치 작업 이후에 헤드에 다른 새 커밋이 있는 경우
    3. 여러 브랜치를 동시에 작업하면서 병합을 시도할 경우
        
        → 진짜 병합이 필요해진다. 충돌이 있을 수 있음.
        
- merge는 reset으로 되돌리기 가능

## rebase(재배치)

- merge와 같이 두 브랜치의 내용을 하나로 합칠 때 사용
- 커밋 히스토리를 깔끔하게 정리할 수 있다.
- 충돌 가능성이 더 높다.
- 협업시에도 위험하다.
- 이미 원격에 있는 브랜치를 rebase 하면 안 된다!
- 로컬에서 혼자 작업할때만 활용
- main을 merge하여 fast-forward 해줘야함

## merge vs rebase

- merge는 두 브랜치를 유지하며 합친 커밋을 생성
- rebase는 한 브랜치를 대상 브랜치에 이어붙임
- merge는 브랜치의 사용 내역을 남겨두어야 하는 프로젝트에서 사용
- rebase는 히스토리를 깔끔하게 만드는게 중요한 프로젝트에서 사용
- 협업시에 공유된 커밋에 대해서는 rebase를 사용하지 않는게 좋다.
- merge는 main 브랜치에서, rebase는 대상 브랜치에서 작업

### 사용하지 않는 브랜치 삭제하기

- merge/rebase 후 사용하지 않는 브랜치는 삭제할 수 있다.
- 브랜치를 삭제할 경우 사라지는 커밋이 있는지 확인!

## 커밋 덮어쓰기

- 필요하다면 이전 커밋 덮어쓰기도 가능
- ‘commit --amend’
- 이미 push를 한 커밋일 경우 push force가 필요함


# 충돌

## 충돌의 발생 원인

- 자동병합을 실패했을 경우 발생
- 주로 두 커밋이 같은 파일을 편집했을 경우 발생

## merge 충돌 해결 방법

- 당장 충돌 해결이 어려울 때는 `git merge --abort` 로 merge 중단
- 해결이 가능할 때는 수정 후에 `git add .` `git commit` 으로 병합 완료

## rebase 충돌 해결 방법

- 커밋을 하나하나 옮기기 떄문에 커밋 하나마다 각각의 충돌들을 개별로 해결해줘야 한다.
- 당장 충돌 해결이 어려울 때는 `git rebase --abort` 로 rebase 중단
- 해결이 가능할 때는 수정 후에 `git add .` `git rebase --continue` 로 계속
- 충돌이 모두 해결될 때까지 반복한다.
- rebase는 충돌시 CLI로 해결 권장


# 원격 저장소와 연동하기

## git pull

- 로컬에서의 헤드보다 다른 컴퓨터나 원격 저장소에 최신의 커밋이 있을 때 사용한다.
- 서버의 내용이 최신일 경우 pull을 적용하면 최신 내용으로 합친다.
- 충돌이 날 수 있지만 놀라지 말자.
- pull = fetch + merge

## pull 할 것이 있을 때 push를 하려면?

- 먼저 pull을 해야한다.
- push 할 것이 있을 시 pull 하는 두 가지 방법
    1. `git pull --no-rebase` - **merge** 방식
        - 로컬과 원격저장소의 커밋을 merge
    2. `git pull --rebase` - **rebase** 방식
        - 원격저장소의 커밋에 로컬의 커밋을 rebase
        - pull 상의 rebase는 다름 (협업시 사용 OK)
    3. push하기

## 로컬의 내역 강제 push하기

- 로컬의 내역을 충돌전으로 `reset`
- `git push --force` 명령어로 원격에 강제 적용
- 협업시 합의하지 않은 상황에서 사용하면 안됨

## **로컬에서 브랜치 만들어 원격에 push 하기**

1. 브랜치 만들기
2. 아래 명령어로 원격의 브랜치 명시 및 기본설정

`git push -u origin 원격브랜치명`

## **원격의 브랜치를 로컬에 받아오기**

1. 아래 명령어로 원격의 변경사항 확인
    - `git fetch`
    - `git branch -a`로 확인
2. 아래 명령어로 로컬에 같은 이름의 브랜치를 생성하여 연결하고 switch
    
    `git switch -t origin/원격브랜치명`

## **원격의 브랜치 삭제**

- `git push (원격 이름) --delete (원격의 브랜치명)`


# 스태시

## 브랜치 변경하기

브랜치를 만들고 체크아웃을 통해 헤드를 변경하려고 하면 현재 작업디렉토리가 깨끗해야 한다. 그런데 갑자기 아직 커밋을 하지 않은 작업 도중 다른 브랜치로 바꾸고 싶을 때 (오류 발생)현재 작업 내용을 임시로 저장하고 싶다면? 이럴 때 덮어쓰기나 스태시를 사용한다. (현재 작업내용을 커밋하면 의미없는 커밋이 되어버릴 수 있어서)

## **스태시 사용하기**

- 스태시를 사용하면 임시 저장 공간에 현재 작업 내용이 저장된다. 이 내용을 스태시라고 하고 언제든지 다시 복구할 수 있다. 스태시라는 임시공간에 임시적으로 작업내용을 저장한다.
- 스테이지에 한번도 올라오지 않은 파일은 스태시가 안되므로 스테이지에 올린 후 스태시에 저장


# 기타 주의사항

1. 주석을 남기지 말자

- 사용하지 않는 불필요한 코드 남겨놓지 않기

2. 좋은 커밋의 단위

- 커밋은 자주
- 원자적으로 쪼갤 수 없는 단위 (주로 함수 등)의 의미있는 개발을 했다면 커밋

3. 커밋 메시지를 잘 쓰자!

- 정말정말 중요한 내용
- Github을 프로파일로 제출했다면? 커밋 메시지를 본다.
- 첫줄에 요약
- 한 줄 띄우고 자세하게 내용을 적자.
- 미래의 나를 위해서라도 커밋 메시지는 잘 적자


# **Git의 관리에서 특정 파일/폴더를 배제해야 할 경우**

## **a. 포함할 필요가 없을 때**

- 자동으로 생성 또는 다운로드되는 파일들 (빌드 결과물, 라이브러리)

## **b. 포함하지 말아야 할 때**

- 보안상 민감한 정보를 담은 파일

### **`.gitignore` 파일을 사용해서 배제할 요소들을 지정할 수 있다.**


